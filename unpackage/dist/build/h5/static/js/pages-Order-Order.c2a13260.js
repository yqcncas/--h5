(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Order-Order"],{"08d0":function(e,t,r){e.exports=r.p+"static/img/3.5bf822b4.png"},"234a":function(e,t,r){var i=r("24fb");t=i(!1),t.push([e.i,'.order[data-v-458050d9]{width:100%;height:100%;overflow:hidden;background-repeat:no-repeat;background-size:100% 100%}.order .order-tab[data-v-458050d9]{width:100%;height:%?86?%;line-height:%?86?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;background:#ff9515}.order .order-tab .order-tab-item[data-v-458050d9]{-webkit-box-flex:1;-webkit-flex:1;flex:1;text-align:center;position:relative;font-family:PingFangSC-Regular;font-size:14px;color:#252525;letter-spacing:0}.order .order-tab .order-tab-item[data-v-458050d9]::after{content:"";width:0;height:0;position:absolute;left:50%;bottom:0;-webkit-transform:translateX(-50%);transform:translateX(-50%);border-bottom:%?6?% solid #fddb3c;-webkit-transition:.5s;transition:.5s}.order .order-tab .order-tab-item.active[data-v-458050d9]{font-family:PingFangSC-Medium;font-size:14px;color:#252525;font-weight:600}.order .order-tab .order-tab-item.active[data-v-458050d9]::after{width:60%}.order .order-main[data-v-458050d9]{padding:%?20?% %?30?%;-webkit-box-sizing:border-box;box-sizing:border-box}.order .order-main .order-main-item[data-v-458050d9]{width:%?690?%;background:#fddb3c;border-radius:10px;padding:0 %?30?%;margin-top:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.order .order-main .order-main-item[data-v-458050d9]:first-child{margin-top:0}.order .order-main .order-main-item .order-main-item-top[data-v-458050d9]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;width:100%;height:%?90?%;line-height:%?90?%;border-bottom:%?1?% solid #fff}.order .order-main .order-main-item .order-main-item-top .order-main-item-top-left uni-text[data-v-458050d9]:nth-child(1){font-family:PingFangSC-Regular;font-size:14px;color:#262626;letter-spacing:-.34px}.order .order-main .order-main-item .order-main-item-top .order-main-item-top-left uni-text[data-v-458050d9]:nth-child(2){font-family:PingFangSC-Regular;font-size:14px;color:#393939;letter-spacing:-.34px;padding-left:%?30?%;-webkit-box-sizing:border-box;box-sizing:border-box}.order .order-main .order-main-item .order-main-item-top .order-main-item-top-right[data-v-458050d9]{font-family:PingFangSC-Regular;font-size:14px;color:#ff6715;letter-spacing:-.34px}.order .order-main .order-main-item .order-main-item-center[data-v-458050d9]{width:100%;height:%?250?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.order .order-main .order-main-item .order-main-item-center.noBottomBorder[data-v-458050d9]{border-bottom:%?1?% solid #fff}.order .order-main .order-main-item .order-main-item-center .order-main-item-center-left uni-image[data-v-458050d9]{width:%?200?%;height:%?200?%}.order .order-main .order-main-item .order-main-item-center .order-main-item-center-right[data-v-458050d9]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.order .order-main .order-main-item .order-main-item-center .order-main-item-center-right .order-main-item-center-right-top[data-v-458050d9]{font-family:PingFangSC-Medium;font-size:12px;color:#272727;letter-spacing:-.29px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;padding-left:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.order .order-main .order-main-item .order-main-item-center .order-main-item-center-right .order-main-item-center-right-center[data-v-458050d9]{font-family:PingFangSC-Regular;font-size:12px;color:#444;letter-spacing:-.29px;padding-top:%?10?%;padding-bottom:%?24?%;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:right}.order .order-main .order-main-item .order-main-item-center .order-main-item-center-right .order-main-item-center-right-center uni-text[data-v-458050d9]{color:#202020;margin-right:%?30?%;-webkit-box-sizing:border-box;box-sizing:border-box}.order .order-main .order-main-item .order-main-item-center .order-main-item-center-right .order-main-item-center-right-footer[data-v-458050d9]{width:100%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-family:PingFangSC-Regular;font-size:14px;color:#202020;letter-spacing:-.34px}.order .order-main .order-main-item .order-main-item-center .order-main-item-center-right .order-main-item-center-right-footer uni-text[data-v-458050d9]{padding-left:%?10?%;-webkit-box-sizing:border-box;box-sizing:border-box;font-family:PingFangSC-Medium;font-size:16px;color:#ff6715}.order .order-main .order-main-item .order-main-item-footer[data-v-458050d9]{width:100%;height:%?120?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.order .order-main .order-main-item .order-main-item-footer uni-image[data-v-458050d9]{width:%?160?%;height:%?60?%;margin-left:%?40?%;-webkit-box-sizing:border-box;box-sizing:border-box}.order .paySucessShow-box[data-v-458050d9]{width:%?652?%;height:%?798?%;background:#fcca17;text-align:center;padding-top:%?20?%;-webkit-box-sizing:border-box;box-sizing:border-box}.order .paySucessShow-box .paySucessShow-box-top uni-image[data-v-458050d9]{width:%?148?%;height:%?252?%}.order .paySucessShow-box .paySucessShow-box-center[data-v-458050d9]{font-family:PingFangSC-Medium;font-size:18px;color:#fff;letter-spacing:0;padding-bottom:%?14?%;-webkit-box-sizing:border-box;box-sizing:border-box}.order .paySucessShow-box .paySucessShow-box-footer[data-v-458050d9]{padding-bottom:%?34?%;-webkit-box-sizing:border-box;box-sizing:border-box}.order .paySucessShow-box .paySucessShow-box-footer uni-image[data-v-458050d9]{width:%?310?%;height:%?310?%}.order .paySucessShow-box .paySucessShow-box-button[data-v-458050d9]{width:%?400?%;height:%?84?%;line-height:%?84?%;background:#ff9515;border-radius:21px;font-family:PingFangSC-Medium;font-size:18px;color:#fff;letter-spacing:0;text-align:center;margin:0 auto}',""]),e.exports=t},3222:function(e,t,r){var i=r("24fb");t=i(!1),t.push([e.i,"[data-v-458050d9] .u-drawer-bottom{border-radius:%?24?% %?24?% 0 0}[data-v-458050d9] .u-mode-center-box{border-radius:%?16?%;overflow:hidden}",""]),e.exports=t},"43ed":function(e,t,r){var i=r("234a");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=r("4f06").default;n("6e7a312f",i,!0,{sourceMap:!1,shadowMode:!1})},"58e8":function(e,t,r){"use strict";var i=r("d8d7"),n=r.n(i);n.a},"84a8":function(e,t,r){"use strict";var i={"u-empty":r("2270").default,"u-popup":r("f403").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"order",style:{backgroundImage:e.bgFlag?"":"url(../../static/image/index/5.png)"}},[i("v-uni-view",{staticClass:"order-tab"},e._l(e.tabList,(function(t,r){return i("v-uni-view",{key:r,staticClass:"order-tab-item",class:{active:e.tabListIndex==r},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleTab(r)}}},[e._v(e._s(t))])})),1),i("v-uni-scroll-view",{staticStyle:{height:"calc(100vh - 86rpx)"},attrs:{"scroll-y":"true"},on:{scrolltolower:function(t){arguments[0]=t=e.$handleEvent(t),e.lower.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"order-main"},[e._l(e.orderList,(function(t,n){return i("v-uni-view",{key:n,staticClass:"order-main-item",on:{click:function(r){arguments[0]=r=e.$handleEvent(r),e.goToOrderDetail(t.orderId,t.categoryId)}}},[i("v-uni-view",{staticClass:"order-main-item-top"},[i("v-uni-view",{staticClass:"order-main-item-top-left"},[i("v-uni-text",[e._v("订单编号")]),i("v-uni-text",[e._v(e._s(t.orderNo))])],1),i("v-uni-view",{staticClass:"order-main-item-top-right"},[e._v(e._s(0==t.status?"已取消":20==t.status?"待发货":30==t.status?"已完成":10==t.status?"待支付":25==t.status?"待收货":""))])],1),i("v-uni-view",{staticClass:"order-main-item-center",class:{noBottomBorder:10==t.status||25==t.status}},[i("v-uni-view",{staticClass:"order-main-item-center-left"},[i("v-uni-image",{attrs:{src:t.pic[0],mode:""}})],1),i("v-uni-view",{staticClass:"order-main-item-center-right"},[i("v-uni-view",{staticClass:"order-main-item-center-right-top"},[e._v(e._s(t.productName))]),i("v-uni-view",{staticClass:"order-main-item-center-right-center"},[i("v-uni-text",[e._v("数量")]),e._v(e._s(t.num))],1),i("v-uni-view",{staticClass:"order-main-item-center-right-footer"},[e._v("商品合计："),i("v-uni-text",[e._v(e._s("关爱卡"==t.categoryName?t.price+"元":t.jkPrice+"JK"))])],1)],1)],1),10==t.status||25==t.status?i("v-uni-view",{staticClass:"order-main-item-footer"},[10==t.status?i("v-uni-image",{attrs:{src:r("ca6c"),mode:""},on:{click:function(r){r.stopPropagation(),arguments[0]=r=e.$handleEvent(r),e.cancelOrder(t.orderId)}}}):e._e(),10==t.status?i("v-uni-image",{attrs:{src:r("a51f"),mode:""},on:{click:function(r){r.stopPropagation(),arguments[0]=r=e.$handleEvent(r),e.payMoney(t.orderId,t.categoryId)}}}):e._e(),25==t.status?i("v-uni-image",{attrs:{src:r("08d0"),mode:""},on:{click:function(r){r.stopPropagation(),arguments[0]=r=e.$handleEvent(r),e.RealizeTake(t.orderId)}}}):e._e()],1):e._e()],1)})),e.showNoList?i("v-uni-view",[i("u-empty",{attrs:{mode:"list"}})],1):e._e()],2)],1),i("u-popup",{attrs:{mode:"center"},model:{value:e.paySucessShow,callback:function(t){e.paySucessShow=t},expression:"paySucessShow"}},[i("v-uni-view",{staticClass:"paySucessShow-box"},[i("v-uni-view",{staticClass:"paySucessShow-box-top"},[i("v-uni-image",{attrs:{src:r("618a"),mode:""}})],1),i("v-uni-view",{staticClass:"paySucessShow-box-center"},[e._v("支付成功,去关爱他人")]),i("v-uni-view",{staticClass:"paySucessShow-box-footer"},[i("v-uni-image",{attrs:{src:e.careQrCode,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"paySucessShow-box-button"},[e._v("长按二维码, 保存图片")])],1)],1)],1)},o=[];r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return i}))},a51f:function(e,t,r){e.exports=r.p+"static/img/1.b3a9728f.png"},c7f9:function(e,t,r){"use strict";var i=r("ee27");r("99af"),r("4160"),r("ac1f"),r("466d"),r("1276"),r("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(r("d0ff"));r("96cf");var o=i(r("c964")),a=(i(r("262d")),r("3d69")),s={onLoad:function(){this.initOrderList();var e=navigator.userAgent.toLowerCase();"micromessenger"==e.match(/MicroMessenger/i)||uni.getStorageSync("orderPayLiulan")&&this.liulanqiPay()},onShow:function(){uni.getStorageSync("refreshOrder")&&(this.handleTab(0),uni.removeStorageSync("refreshOrder"))},data:function(){return{tabList:["全部","待付款","待发货","待收货"],tabListIndex:0,orderStatus:["待付款","待发货","待收货"],pageNum:0,pageSize:10,hasFlag:!0,orderList:[],status:"",showNoList:!1,bgFlag:!0,orderId:0,paySucessShow:!1,careQrCode:"",successIndex:0}},methods:{liulanqiPay:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=uni.getStorageSync("orderPayLiulan"),t.next=3,e.$fetch(e.$api.orderInfo,{orderId:r},"GET","FORM");case 3:i=t.sent,30==i.data.status?(uni.showToast({icon:"success",title:"支付成功"}),e.careQrCode=i.data.carePic,e.careQrCode&&(e.orderList.forEach((function(t,i){t.orderId==r&&(e.successIndex=i)})),e.orderList[e.successIndex].status=30,e.paySucessShow=!0)):uni.showToast({icon:"none",title:"支付失败"}),uni.removeStorageSync("orderPayLiulan");case 6:case"end":return t.stop()}}),t)})))()},handleTab:function(e){this.tabListIndex=e,this.pageNum=0,this.pageSize=10,this.hasFlag=!0,this.orderList=[],this.showNoList=!1,this.initOrderList()},goToOrderDetail:function(e,t){0==t||uni.navigateTo({url:"../OrderDetail/OrderDetail?orderId="+e})},initOrderList:function(){var e=this;return(0,o.default)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hasFlag){t.next=2;break}return t.abrupt("return");case 2:return e.pageNum=++e.pageNum,0==e.tabListIndex?e.status="":1==e.tabListIndex?e.status=10:2==e.tabListIndex?e.status=20:3==e.tabListIndex&&(e.status=25),t.next=6,e.$fetch(e.$api.orderList,{pageNum:e.pageNum,pageSize:e.pageSize,status:e.status},"GET","FORM");case 6:r=t.sent,console.log(r),r.rows.forEach((function(e){e.pic=e.pic.split(",")})),e.orderList=[].concat((0,n.default)(e.orderList),(0,n.default)(r.rows)),0==e.orderList.length?e.showNoList=!0:e.bgFlag=!1,e.hasFlag=10*e.pageNum<r.total;case 12:case"end":return t.stop()}}),t)})))()},lower:function(){this.hasFlag&&this.initOrderList()},payMoney:function(e,t){var r=this;return(0,o.default)(regeneratorRuntime.mark((function i(){var n,s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:1==t?uni.showModal({title:"确认领取或购买",content:"是否确认领取或购买该商品",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(i){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i.confirm){t.next=9;break}return console.log("用户点击确定"),t.next=4,r.$fetch(r.$api.pay,{orderId:e},"POST","FORM");case 4:n=t.sent,console.log(n),0==n.code?(uni.showToast({icon:"success",title:n.msg}),setTimeout((function(){r.handleTab(2)}),1e3)):uni.showToast({icon:"none",title:n.msg}),t.next=10;break;case 9:i.cancel&&console.log("用户点击取消");case 10:case"end":return t.stop()}}),t)})));function i(e){return t.apply(this,arguments)}return i}()}):(n=r,s=navigator.userAgent.toLowerCase(),uni.showModal({title:"确认支付",content:"是否确认购买该商品",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(i){var d,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!i.confirm){t.next=28;break}if(uni.showLoading({title:"加载中"}),"micromessenger"!=s.match(/MicroMessenger/i)){t.next=15;break}if(!uni.getStorageSync("openId")){t.next=13;break}return d=uni.getStorageSync("openId"),t.next=7,r.$fetch(r.$api.gzPay,{openId:d,orderId:e},"POST","FORM");case 7:c=t.sent,u=JSON.parse(c.data),uni.hideLoading(),a.config({debug:!1,appId:"wx5ce43c078d7bcc23",timestamp:u.timeStamp,nonceStr:u.nonceStr,signature:u.paySign,jsApiList:["chooseWXPay"]}),a.ready((function(){a.checkJsApi({jsApiList:["chooseWXPay"],success:function(e){console.log("checkjsapi Success"),console.log(e)},fail:function(e){console.log("res"),console.log(e)}}),a.chooseWXPay({timestamp:u.timeStamp,nonceStr:u.nonceStr,package:u.package,signType:u.signType,paySign:u.paySign,success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(r){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return uni.showToast({icon:"success",title:"支付成功"}),t.next=3,n.$fetch(n.$api.orderInfo,{orderId:e},"GET","FORM");case 3:i=t.sent,n.careQrCode=i.data.carePic,n.careQrCode&&(n.orderList.forEach((function(t,r){t.orderId==e&&(n.successIndex=r)})),n.orderList[n.successIndex].status=30,n.paySucessShow=!0),console.log(i);case 7:case"end":return t.stop()}}),t)})));function r(e){return t.apply(this,arguments)}return r}(),cancel:function(e){uni.showToast({icon:"none",title:"取消支付"}),console.log(e),console.log("/////////")},fail:function(e){uni.showToast({icon:"none",title:"支付失败"}),console.log(e),console.log("******")}})})),a.error((function(e){uni.showToast({icon:"none",title:"支付失败了",duration:4e3})}));case 13:t.next=26;break;case 15:return t.next=17,r.$fetch(r.$api.webPay,{orderId:e},"POST","FORM");case 17:if(l=t.sent,console.log(l),500!=l.code){t.next=23;break}return t.abrupt("return",uni.showToast({icon:"none",title:l.msg}));case 23:uni.setStorageSync("orderPayLiulan",e),uni.hideLoading(),window.location.href=l.data+"&redirect_url=http%3A%2F%2Fh5.jjkkx.com/pages/Order/Order";case 26:t.next=29;break;case 28:i.cancel&&console.log("用户点击取消");case 29:case"end":return t.stop()}}),t)})));function i(e){return t.apply(this,arguments)}return i}()}));case 1:case"end":return i.stop()}}),i)})))()},cancelOrder:function(e){var t=this;uni.showModal({title:"取消订单",content:"是否取消该订单",success:function(){var r=(0,o.default)(regeneratorRuntime.mark((function r(i){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!i.confirm){r.next=8;break}return r.next=3,t.$fetch(t.$api.cancelOrder,{orderId:e},"POST","FORM");case 3:n=r.sent,console.log(n),0==n.code?(uni.showToast({icon:"success",title:n.msg}),setTimeout((function(){t.handleTab(t.tabListIndex)}),1e3)):uni.showToast({icon:"none",title:n.msg}),r.next=9;break;case 8:i.cancel&&console.log("用户点击取消");case 9:case"end":return r.stop()}}),r)})));function i(e){return r.apply(this,arguments)}return i}()})},RealizeTake:function(e){var t=this;uni.showModal({title:"确认收货",content:"请确认是否已收到货物",success:function(){var r=(0,o.default)(regeneratorRuntime.mark((function r(i){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!i.confirm){r.next=8;break}return r.next=3,t.$fetch(t.$api.confirmOrder,{orderId:e},"POST","FORM");case 3:n=r.sent,console.log(n),0==n.code?(uni.showToast({icon:"success",title:n.msg}),t.pageNum=0,t.pageSize=10,t.hasFlag=!0,t.orderList=[],t.showNoList=!1,t.orderId=0,t.initOrderList()):uni.showToast({icon:"none",title:n.msg}),r.next=9;break;case 8:i.cancel&&console.log("用户点击取消");case 9:case"end":return r.stop()}}),r)})));function i(e){return r.apply(this,arguments)}return i}()})}},onPullDownRefresh:function(){var e=this;setTimeout((function(){e.pageNum=0,e.pageSize=10,e.hasFlag=!0,e.orderList=[],e.showNoList=!1,e.orderId=0,e.initOrderList(),uni.stopPullDownRefresh()}),1e3)}};t.default=s},ca6c:function(e,t,r){e.exports=r.p+"static/img/2.cbd46666.png"},cbd2:function(e,t,r){"use strict";r.r(t);var i=r("84a8"),n=r("d92b");for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);r("f026"),r("58e8");var a,s=r("f0c5"),d=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"458050d9",null,!1,i["a"],a);t["default"]=d.exports},d0ff:function(e,t,r){"use strict";r.r(t);var i=r("b6802");function n(e){if(Array.isArray(e))return Object(i["a"])(e)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function o(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var a=r("dde1");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e){return n(e)||o(e)||Object(a["a"])(e)||s()}r.d(t,"default",(function(){return d}))},d8d7:function(e,t,r){var i=r("3222");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=r("4f06").default;n("75a31370",i,!0,{sourceMap:!1,shadowMode:!1})},d92b:function(e,t,r){"use strict";r.r(t);var i=r("c7f9"),n=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,(function(){return i[e]}))}(o);t["default"]=n.a},f026:function(e,t,r){"use strict";var i=r("43ed"),n=r.n(i);n.a}}]);